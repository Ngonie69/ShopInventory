<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <location path="." inheritInChildApplications="false">
    <system.webServer>
      <!-- Enable WebSockets for Blazor Server SignalR -->
      <webSocket enabled="true" />
      <handlers>
        <add
          name="aspNetCore"
          path="*"
          verb="*"
          modules="AspNetCoreModuleV2"
          resourceType="Unspecified"
        />
      </handlers>
      <aspNetCore
        processPath="dotnet"
        arguments=".\ShopInventory.Web.dll"
        stdoutLogEnabled="true"
        stdoutLogFile=".\logs\stdout"
        hostingModel="InProcess"
      >
        <environmentVariables>
          <!-- Core Settings -->
          <environmentVariable name="ASPNETCORE_ENVIRONMENT" value="Production" />
          <!-- Database Connection (for Blazor Identity/Cache) -->
          <environmentVariable
            name="ConnectionStrings__DefaultConnection"
            value="Host=localhost;Port=5432;Database=shopinventoryweb;Username=shopinventory;Password=YOUR_DB_PASSWORD"
          />
          <!-- API Settings - Point to your API -->
          <environmentVariable name="ApiSettings__BaseUrl" value="http://localhost:5106/" />
          <environmentVariable
            name="ApiSettings__ApiKey"
            value="YOUR_API_KEY_FOR_SERVICE_COMMUNICATION"
          />
          <!-- Email Configuration -->
          <environmentVariable name="Email__SmtpHost" value="smtp.your-provider.com" />
          <environmentVariable name="Email__SmtpUsername" value="your-email@domain.com" />
          <environmentVariable name="Email__SmtpPassword" value="YOUR_SMTP_PASSWORD" />
          <environmentVariable name="Email__FromEmail" value="noreply@your-domain.com" />
          <environmentVariable name="Email__ApplicationUrl" value="https://your-domain.com" />
          <!-- AI Configuration (Optional) -->
          <environmentVariable name="AI__ApiKey" value="" />
        </environmentVariables>
      </aspNetCore>
    </system.webServer>
  </location>
</configuration>
